<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DApp 登录</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="login-container">
    <h2>登录到 DApp</h2>
    <button id="connectWalletBtn">连接钱包</button>
    <p id="walletStatus" style="margin-top:15px;color:#555;"></p>
</div>

<script>
const connectBtn = document.getElementById('connectWalletBtn');
const walletStatus = document.getElementById('walletStatus');

async function connectWallet() {
    if(window.ethereum){
        try {
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            const account = accounts[0];
            walletStatus.innerText = '已连接钱包: ' + account;
            sessionStorage.setItem('wallet', account);
            setTimeout(() => { window.location.href = 'confirm.html'; }, 1000);
        } catch(err){
            walletStatus.innerText = '用户拒绝连接钱包';
        }
    } else {
        walletStatus.innerHTML = '未检测到钱包插件，<a href="https://metamask.io/" target="_blank">安装 MetaMask</a>';
    }
}

connectBtn.addEventListener('click', connectWallet);
</script>

</body>
</html>
